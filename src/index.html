<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="container">
      <div id="content">
        <input type="button" id="i1" value="i1" onclick="errorClick()" />
        <input type="button" id="i2" value="i2" onclick="promiseErrorClick()" />
        <hr />
        <input
          type="button"
          value="发起ajax成功请求"
          onclick="sendAjaxSuccess()"
        />
        <input
          type="button"
          value="发起ajax失败请求"
          onclick="sendAjaxError()"
        />
      </div>
    </div>
    <script>
      let obj = { a: { b: 1 } };
      console.log(obj);
      obj.a.b = 3;
      function errorClick() {
        window.someVal.error = "error";
      }
      function promiseErrorClick() {
        new Promise((res, rej) => {
          window.someVal.error = "error";
        });
      }
      function sendAjaxSuccess() {
        let xhr = new XMLHttpRequest();
        xhr.open("GET", "/success", true);
        xhr.responseType = "json";
        xhr.onload = function () {
          console.log(xhr.response);
        };
        xhr.send();
      }
      function sendAjaxError() {
        let xhr = new XMLHttpRequest();
        xhr.open("POST", "/error", true);
        xhr.responseType = "json";
        xhr.onload = function () {
          console.log(xhr.response);
        };
        xhr.onerror = function (error) {
          console.log(error);
        };
        xhr.send("name=yxd");
      }
    </script>
    <script>
      let content = document.getElementsByClassName("content")[0];
      setTimeout(() => {
        let h1 = document.createElement("h1");
        h1.innerHTML = "我是最有重要的内容";
        h1.setAttribute("elementtiming", "meaningful"); // FMP会获取有elementtiming（固定的key）的元素，作为FMP；如果没有这个属性的元素，FMP为undefined
        content.appendChild(h1);
      }, 2000);
    </script>
    <!-- <script src="/someError.js"></script> -->
  </body>
</html>
